<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" name="viewport">
    <meta content="ie=edge" http-equiv="X-UA-Compatible">
    <title>ê²Œì‹œíŒ</title>
    <link href="/main.css" rel="stylesheet">
    <link href="/board/board.css" rel="stylesheet">

</head>
<body>
<div th:replace="~{ nav.html::navbar }"></div>

<!-- ê²€ìƒ‰ í¼ -->
<div class="customer-search-form">
    <form action="/boardsearch" method="POST">
        <input name="searchText" type="text" class="customer-search-input" placeholder="ê²€ìƒ‰">
        <button type="submit" class="customer-search-button">ê²€ìƒ‰</button>
    </form>
</div>

<button class="customer-add-button" onclick="location.href='/boardwrite'">âœï¸ ì‘ì„±!!!</button> <!-- ì¤‘ì•™ ì •ë ¬ëœ ì‘ì„± ë²„íŠ¼ -->

<!-- ê²Œì‹œíŒ í…Œì´ë¸” -->
<table class="board-table">
    <thead>
    <tr>
        <th>ë²ˆí˜¸</th>
        <th>ì œëª©</th>
        <th>ë‚´ìš©</th>
        <th>ê´€ë¦¬</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="i, iterStat : ${boards}">
        <td th:text="${iterStat.count}">1</td> <!-- ìë™ ì¦ê°€ ë²ˆí˜¸ -->
        <td>
            <a th:href="@{'/boarddetail/' + ${i.id}}" th:text="${i.boardtitle}">ì œëª©</a>
        </td>
        <td class="board-content-text" th:text="${i.boardcontent}">ë‚´ìš©</td>
        <td>
            <button class="editbt" th:onclick="|location.href='@{/boardedit/{id}(id=${i.id})}'|">âœï¸ ìˆ˜ì •</button>
            <button class="delectbt" th:onclick="|if(confirm('ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
            fetch('/board?id=${i.id}', { method: 'DELETE' })
            .then(r => r.text())
            .then(() => { location.reload(); }) }|">
                ğŸ—‘ï¸ ì‚­ì œ
            </button>
        </td>
    </tr>
    </tbody>
</table>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const boardContentTexts = document.querySelectorAll('.board-content-text');

        boardContentTexts.forEach(function (element) {
            let content = element.textContent; // innerHTML ëŒ€ì‹  textContent ì‚¬ìš©
            // ì¤„ë°”ê¿ˆì„ <br>ë¡œ ë³€í™˜í•˜ì§€ ì•ŠìŒ
            element.textContent = content; // ê·¸ëƒ¥ í…ìŠ¤íŠ¸ ê·¸ëŒ€ë¡œ ì‚¬ìš©
        });
    });
</script>

</body>
</html>
