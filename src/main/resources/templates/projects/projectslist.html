<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>프로젝트 목록</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link href="/main.css" rel="stylesheet">
    <link href="/project/projectlist.css" rel="stylesheet">
</head>
<body>
    <!-- 상단 네비게이션 바 -->
    <div th:replace="~{ nav.html::navbar }"></div>

    <!-- 메인 컨테이너 시작 -->
    <div class="container">
        <h2>📋 프로젝트 목록</h2>
<div style="margin-top: 20px; text-align: right;">
            <a href="/projects/write" class="btn">+ 새 프로젝트 등록</a>
        </div>
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>이름</th>
                    <th>설명</th>
                    <th>시작일</th>
                    <th>종료일</th>
                    <th>예산</th>
                    <th>액션</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="project : ${projects}">
                    <td th:text="${project.id}">1</td>
                    <td th:text="${project.name}">이름</td>
                    <td th:text="${project.description}">설명</td>
                    <td th:text="${project.startDate}">2024-01-01</td>
                    <td th:text="${project.endDate}">2024-12-31</td>
                    <td th:text="${#numbers.formatInteger(project.budget, 0, 'COMMA')}">10,000,000</td>
                    <td>
                        <a th:href="@{/projects/{id}(id=${project.id})}" class="btn">상세보기</a>
                        <a th:href="@{/projects/{id}/edit(id=${project.id})}" class="btn">수정</a>
                        <a href="#" th:onclick="'deleteProject(' + ${project.id} + ')'" class="btn btn-danger">삭제</a>


                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <script>
		 function deleteProject(projectId) {
    if (confirm("정말 삭제하시겠습니까?")) {
      fetch(`/projects/${projectId}`, {
        method: 'DELETE'
      }).then(response => {
        if (response.ok) {
          alert("삭제 완료");
          window.location.href = "/projects/list";
        } else {
          alert("삭제 실패");
        }
      });
    }
  }
	</script>
</body>
</html>
